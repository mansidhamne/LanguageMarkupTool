<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Language Markup Interface</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <a href="index.html" class="back-button">Go Back</a>
    <h1>Language Markup Interface</h1>
    <div class="user-info">
        <h3>Welcome, <span id="displayName"></span></h3>
        <h3>Proficiency Level: <span id="displayProficiency"></span></h3>
    </div>
    <div class="container">
        <div class="file-inputs">
            <div class="file-input-label">
                <label id="label-name" for="audioFile">Upload Audio File</label>
                <input type="file" id="audioFile" accept="audio/*" disabled>
            </div>
            <div class="file-input-label">
                <label id="label-name" for="transcriptFile">Upload Transcript File</label>
                <input type="file" id="transcriptFile" accept=".txt" onchange="storeFileName(event)" disabled>
            </div>
            <div class="file-input-label" style="display: none;">
                <label id="label-name" for="transcriptFile">Select File</label>
                <select class="file-select-label" id="fileSelect" onchange="useSelectedFile()">
                    <option value="" disabled selected>Select Files</option>
                </select>
            </div>
        </div>

        <div class="file-progress">
            <label><span id="storyProgress">Story 0 of 8</span></label>
            <progress id="progressBar" value="0" max="8"></progress>
        </div>
        
        <audio id="audioPlayer" controls class="audio-player">
            Your browser does not support the audio element.
        </audio>
        
        <div class="transcript-container" id="transcriptDisplay">
            <p>Load a transcript file to begin...</p>
        </div>
        
        <div class="buttons">
            <button id="exportButton" style="display: none;">Export as TXT</button>
            <button id="exportCsvButton" style="display: none;">Export as CSV</button>
            <button id="resetButton">Reset Markers</button>
            <button id="skipButton">Skip Story</button>
            <button id="sendDataButton">Send Data</button>
        </div>
        <p id="notice">Don't forget to <strong>Send Data</strong> before starting with a new story !</p>
        <textarea id="output" readonly placeholder="The processed transcript will appear here..."></textarea>
        <div class="phrases-container" id="outputArea"></div>
    </div>
    <script>
        const params = new URLSearchParams(window.location.search);
        const name = params.get("name");
        const proficiency = params.get("proficiency");

        document.getElementById("displayName").textContent = name || "Unknown User";
        document.getElementById("displayProficiency").textContent = proficiency !== null ? proficiency : "Not Provided";
    </script>
    <script src="script.js"></script>  
</body>
</html>